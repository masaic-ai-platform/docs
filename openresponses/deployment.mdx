---
title: 'Deployment'
description: 'Deploying OpenResponses in production environments'
---

# Deployment Guide

This guide covers best practices for deploying OpenResponses in production environments. We'll cover Docker deployments, Kubernetes options, configuration recommendations, and security considerations.

## Deployment Options

<CardGroup cols={2}>
  <Card
    title="Docker Standalone"
    icon="docker"
    href="#docker-standalone-deployment"
  >
    Deploy as a single Docker container with configurable options
  </Card>
  <Card
    title="Docker Compose"
    icon="layer-group"
    href="#docker-compose-deployment"
  >
    Multi-container deployment with storage and observability
  </Card>
  <Card
    title="Kubernetes"
    icon="dharmachakra"
    href="#kubernetes-deployment"
  >
    Enterprise-grade deployment with scalability and high availability
  </Card>
  <Card
    title="Custom Deployment"
    icon="wrench"
    href="#custom-deployment"
  >
    Guide for deploying from source with custom configurations
  </Card>
</CardGroup>

## Docker Standalone Deployment

The simplest way to deploy OpenResponses in production is using Docker:

```bash
docker run -d \
  --name openresponses \
  -p 8080:8080 \
  -e OPEN_RESPONSES_RESPONSE_STORE_TYPE=in-memory \
  masaicai/open-responses:latest
```

### Environment Variables

Key environment variables to consider:

| Variable | Description | Default |
|----------|-------------|---------|
| `MCP_SERVER_CONFIG_FILE_PATH` | Path to MCP server configuration | - |
| `MASAIC_MAX_TOOL_CALLS` | Maximum number of allowed tool calls | 10 |
| `MASAIC_MAX_STREAMING_TIMEOUT` | Maximum streaming timeout in ms | 60000 |
| `SPRING_PROFILES_ACTIVE` | Active Spring profiles | - |

## Docker Compose Deployment

For a more complete deployment with storage and observability:

```yaml
version: '3.8'

services:
  # OpenResponses API service
  open-responses:
    image: masaicai/open-responses:latest
    ports:
      - "8080:8080"
    environment:
      - OPEN_RESPONSES_RESPONSE_STORE_TYPE=mongodb
      - OPEN_RESPONSES_MONGODB_URI=mongodb://mongodb:27017
      - OPEN_RESPONSES_MONGODB_DATABASE=openresponses
      - SPRING_PROFILES_ACTIVE=otel
    depends_on:
      - mongodb
    restart: unless-stopped

  # MongoDB for persistent storage
  mongodb:
    image: mongo:latest
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    restart: unless-stopped

  # Observability stack components
  prometheus:
    image: prom/prometheus:latest
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest
    ports:
      - "3000:3000"
    volumes:
      - grafana_data:/var/lib/grafana
    restart: unless-stopped

volumes:
  mongodb_data:
  grafana_data:
```

Run with:

```bash
docker-compose up -d
```

## Kubernetes Deployment

For production environments requiring high availability and scalability, deploy OpenResponses on Kubernetes.

### Kubernetes Manifests

1. **Deployment**

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: openresponses
  labels:
    app: openresponses
spec:
  replicas: 3
  selector:
    matchLabels:
      app: openresponses
  template:
    metadata:
      labels:
        app: openresponses
    spec:
      containers:
      - name: openresponses
        image: masaicai/open-responses:latest
        ports:
        - containerPort: 8080
        env:
        - name: OPEN_RESPONSES_RESPONSE_STORE_TYPE
          value: "mongodb"
        - name: OPEN_RESPONSES_MONGODB_URI
          value: "mongodb://mongodb-service:27017"
        - name: OPEN_RESPONSES_MONGODB_DATABASE
          value: "openresponses"
        - name: SPRING_PROFILES_ACTIVE
          value: "otel"
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "1Gi"
            cpu: "1000m"
        readinessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
```

2. **Service**

```yaml
apiVersion: v1
kind: Service
metadata:
  name: openresponses-service
spec:
  selector:
    app: openresponses
  ports:
  - port: 80
    targetPort: 8080
  type: LoadBalancer
```

Apply with:

```bash
kubectl apply -f openresponses-deployment.yaml
kubectl apply -f openresponses-service.yaml
```

## Custom Deployment

For custom deployments from source:

1. **Prerequisites**
   - Java JDK 21+
   - Gradle (optional, as project includes Gradle Wrapper)

2. **Build the project**

```bash
git clone https://github.com/masaic-ai-platform/open-responses.git
cd open-responses
./gradlew build
```

3. **Run the application**

```bash
java -jar build/libs/open-responses-*.jar
```

## Security Considerations

### API Keys

Configure proper API key management:

- Store API keys in environment variables or a secure vault
- Rotate keys regularly
- Use specific access policies for each key

### Network Security

Secure your OpenResponses deployment:

- Run behind a reverse proxy like Nginx
- Enable HTTPS with valid certificates
- Configure proper CORS settings
- Implement rate limiting

### Example Nginx Configuration

```nginx
server {
    listen 443 ssl;
    server_name api.yourdomain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## Monitoring and Health Checks

OpenResponses provides health endpoints via Spring Actuator:

- Health check: `/actuator/health`
- Metrics: `/actuator/metrics`
- Info: `/actuator/info`

Configure your monitoring tools to track these endpoints.

## Performance Tuning

For optimal performance:

1. **JVM Settings**
   ```
   -Xms1g -Xmx2g -XX:+UseG1GC
   ```

2. **Application Properties**
   ```properties
   # Connection pool settings
   spring.datasource.hikari.maximum-pool-size=20
   
   # Response timeout
   masaic.max.streaming.timeout=90000
   
   # Tool call limits
   masaic.max.tool.calls=15
   ```

3. **Resource Allocation**
   - Allocate sufficient CPU and memory based on expected load
   - Consider dedicated instances for high-traffic deployments

## Backup and Recovery

For production deployments:

1. **Regular Database Backups**
   ```bash
   # MongoDB backup
   mongodump --uri="mongodb://localhost:27017" --db=openresponses --out=/backup/$(date +%Y-%m-%d)
   ```

2. **Configuration Backups**
   - Back up all configuration files and environment variables
   - Document the deployment setup

3. **Disaster Recovery Plan**
   - Create a step-by-step recovery procedure
   - Test recovery periodically

## Additional Resources

- [Docker Compose Reference](https://docs.docker.com/compose/reference/)
- [Kubernetes Documentation](https://kubernetes.io/docs/home/)
- [Spring Boot Production Guide](https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html)
- [MongoDB Backup and Recovery](https://docs.mongodb.com/manual/core/backups/) 